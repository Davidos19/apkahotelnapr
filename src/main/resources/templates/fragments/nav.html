<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<nav th:fragment="nav" class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/"> Hotel Booking</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/"> Strona g贸wna</a>
                </li>

                <!-- Sekcja dla administrator贸w -->
                <li th:if="${isAdmin}" class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-toggle="dropdown">
                         Panel Administratora
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/admin/hotels"> Hotele</a>
                        <a class="dropdown-item" href="/admin/users"> U偶ytkownicy</a>
                        <a class="dropdown-item" href="/admin/hotels/dashboard"> Dashboard</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="/admin/hotels/admin/reservations"> Wszystkie rezerwacje</a>
                    </div>
                </li>

                <!-- Sekcja dla mened偶er贸w hoteli -->
                <li th:if="${isHotelManager and !isAdmin}" class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="managerDropdown" role="button" data-toggle="dropdown">
                         Panel Mened偶era
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/admin/hotels"> Zarzdzaj hotelami</a>
                        <a class="dropdown-item" href="/admin/hotels/admin/reservations"> Rezerwacje</a>
                    </div>
                </li>

                <!-- Sekcja dla recepcjonist贸w -->
                <li th:if="${canManageReservations and !isHotelManager and !isAdmin}" class="nav-item">
                    <a class="nav-link" href="/admin/hotels/admin/reservations"> Rezerwacje</a>
                </li>
            </ul>

            <!-- Menu u偶ytkownika po prawej stronie -->
            <ul class="navbar-nav">
                <li th:if="${currentUser != null}" class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown">
                         <span th:text="${currentUser.username}">User</span>
                        <!-- Poka偶 rol jako badge -->
                        <span th:if="${currentUser.role != null}"
                              class="badge ml-1"
                              th:classappend="${isAdmin} ? 'badge-warning' : 'badge-info'"
                              th:text="${currentUser.role.description}">
                            Rola
                        </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a class="dropdown-item" href="/profile"> Profil</a>
                        <a class="dropdown-item" href="/my-reservations"> Moje rezerwacje</a>
                        <div class="dropdown-divider"></div>
                        <form action="/logout" method="post" style="display: inline;">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button type="submit" class="dropdown-item"> Wyloguj</button>
                        </form>
                    </div>
                </li>

                <!-- Jeli u偶ytkownik nie jest zalogowany -->
                <li th:if="${currentUser == null}" class="nav-item">
                    <a class="nav-link" href="/login"> Zaloguj si</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

</body>
</html>